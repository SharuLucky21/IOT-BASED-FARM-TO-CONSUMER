<!DOCTYPE html>
<html>
<head>
<title>Farmer Profile</title>

<style>

body { margin:0; font-family:Segoe UI; background:#f4f6f8; }
.header {
  background:white; padding:15px 40px;
  display:flex; justify-content:space-between;
  box-shadow:0 2px 10px rgba(0,0,0,.1);
}
.logo { font-size:22px; font-weight:bold; color:#27ae60; }
.nav a {
  margin-left:25px; text-decoration:none;
  font-weight:600; color:#333;
}
.container { padding:40px; }
.card {
  background:white; padding:30px;
  max-width:450px; border-radius:14px;
  box-shadow:0 6px 16px rgba(0,0,0,.1);
}
input, select {
  width:100%; padding:12px; margin:10px 0;
  border-radius:8px; border:1px solid #ccc;
}
button {
  width:100%; padding:14px;
  background:#27ae60; color:white;
  border:none; border-radius:30px;
  font-weight:bold;
}

.card {
  background:white; padding:30px;
  max-width:600px; margin:40px auto;
  border-radius:14px; box-shadow:0 6px 16px rgba(0,0,0,.1);
}
p { margin:10px 0; }
</style>
</head>

<body>

<div class="header">
  <div>ðŸŒ± Smart Eco Farm</div>
  <a href="/farmer">â¬… Back</a>
</div>

<div class="card">
  <h2>Farmer Profile</h2>
  <p><b>Name:</b> <span id="name"></span></p>
  <p><b>Email:</b> <span id="email"></span></p>
  <p><b>Mobile:</b> <span id="mobile"></span></p>
  <p><b>Gender:</b> <span id="gender"></span></p>
  <p><b>Date of Birth:</b> <span id="dob"></span></p>
  <p><b>Crops Grown:</b> <span id="crops"></span></p>
</div>

<script>
const email = localStorage.getItem("loggedInUser");

if (!email) {
  alert("No user logged in");
  window.location.href = "/login";
} else {
  fetch(`/api/profile/${email}`)
    .then(res => res.json())
    .then(user => {
      if (user.error) {
        alert("Error fetching profile: " + user.error);
      } else {
        document.getElementById("name").innerText = user.name || "N/A";
        document.getElementById("email").innerText = user.email || "N/A";
        document.getElementById("mobile").innerText = user.mobile || "N/A";
        document.getElementById("gender").innerText = user.gender || "N/A";
        document.getElementById("dob").innerText = user.dob || "N/A";
        document.getElementById("crops").innerText = user.crops || "N/A";
      }
    })
    .catch(err => {
      console.error("Error:", err);
      alert("An error occurred while fetching the profile.");
    });
}
</script>

</body>
</html>
